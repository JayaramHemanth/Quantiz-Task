<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heat Map Visualization</title>
    <script src="https://cdn.plot.ly/plotly-2.20.0.min.js"></script>
    <style>
        #heatmap {
            width: 100%;
            height: 90%;
            margin: auto;
        }
    </style>
</head>
<body>
    <h1>Gaming Consoles Heat Map</h1>
    <div id="heatmap"></div>

    <script>
        // Fetch data from the JSON file
        fetch('assessment.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                // Extract gaming console names and feature categories
                const gamingConsoles = data.data.map(item => item.name);
                const featureCategories = data.data[0].data.map(feature => feature.label);

                // Create a matrix of ratings
                const ratingsMatrix = data.data.map(console =>
                    console.data.map(feature => feature.value)
                );

                // Transpose the ratings matrix to match the desired axis configuration
                const transposedMatrix = featureCategories.map((_, colIndex) => 
                    gamingConsoles.map((_, rowIndex) => ratingsMatrix[rowIndex][colIndex])
                );

                // Plot the heat map using Plotly
                const heatmapData = [{
                    z: transposedMatrix,
                    x: featureCategories,  // Set features on the x-axis
                    y: gamingConsoles,     // Set consoles on the y-axis
                    type: 'heatmap',
                    colorscale: 'Viridis', // You can experiment with other color scales
                    colorbar: {
                        title: 'Ratings',
                        titleside: 'right'
                    }
                }];

                const layout = {
                    title: 'Gaming Console Feature Ratings',
                    xaxis: {
                        title: 'Feature Categories',
                        tickangle: -45
                    },
                    yaxis: {
                        title: 'Gaming Consoles'
                    },
                    margin: {
                        l: 200, // Adjust margins to fit y-axis labels
                        r: 50,
                        t: 50,
                        b: 100
                    }
                };

                // Create the plot with Plotly
                Plotly.newPlot('heatmap', heatmapData, layout);
            })
            .catch(error => console.error('Error fetching data:', error));
    </script>
</body>
</html>
